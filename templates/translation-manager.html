<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>i18n translator</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    sans-serif;
                background: #f5f5f5;
                color: #333;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 20px;
            }

            .header {
                background: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                margin-bottom: 20px;
            }

            .header h1 {
                color: #1890ff;
                margin-bottom: 10px;
            }

            .stats {
                display: flex;
                gap: 20px;
                margin-top: 15px;
            }

            .stat-item {
                background: #f0f9ff;
                padding: 10px 15px;
                border-radius: 6px;
                border-left: 4px solid #1890ff;
            }

            .controls {
                background: white;
                padding: 20px;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                margin-bottom: 20px;
            }

            .control-group {
                display: flex;
                gap: 15px;
                align-items: center;
                margin-bottom: 15px;
            }

            .control-group:last-child {
                margin-bottom: 0;
            }

            input,
            select,
            button {
                padding: 8px 12px;
                border: 1px solid #ddd;
                border-radius: 4px;
                font-size: 14px;
            }

            button {
                background: #1890ff;
                color: white;
                border: none;
                cursor: pointer;
                transition: background 0.3s;
            }

            button:hover {
                background: #40a9ff;
            }

            button.secondary {
                background: #52c41a;
            }

            button.secondary:hover {
                background: #73d13d;
            }

            button.danger {
                background: #ff4d4f;
            }

            button.danger:hover {
                background: #ff7875;
            }

            .table-container {
                background: white;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                overflow: hidden;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th,
            td {
                padding: 12px;
                text-align: left;
                border-bottom: 1px solid #f0f0f0;
            }

            th {
                background: #fafafa;
                font-weight: 600;
                position: sticky;
                top: 0;
                z-index: 10;
            }

            tr:hover {
                background: #f5f5f5;
            }

            .translation-cell {
                max-width: 200px;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .translation-cell:hover {
                white-space: normal;
                overflow: visible;
            }

            .key-cell {
                font-family: "Monaco", "Menlo", monospace;
                background: #f6f8fa;
                border-radius: 3px;
                padding: 4px 6px;
                font-size: 12px;
            }

            .file-badge {
                background: #e6f7ff;
                color: #1890ff;
                padding: 2px 8px;
                border-radius: 12px;
                font-size: 12px;
            }

            .actions {
                display: flex;
                gap: 5px;
            }

            .btn-small {
                padding: 4px 8px;
                font-size: 12px;
            }

            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 1000;
            }

            .modal-content {
                background: white;
                margin: 50px auto;
                padding: 20px;
                border-radius: 8px;
                max-width: 800px;
                max-height: 80vh;
                overflow-y: auto;
            }

            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                padding-bottom: 10px;
                border-bottom: 1px solid #f0f0f0;
            }

            .close {
                font-size: 24px;
                cursor: pointer;
                color: #999;
            }

            .close:hover {
                color: #333;
            }

            .form-group {
                margin-bottom: 15px;
            }

            .form-group label {
                display: block;
                margin-bottom: 5px;
                font-weight: 500;
            }

            .form-group input,
            .form-group textarea {
                width: 100%;
                padding: 8px 12px;
                border: 1px solid #ddd;
                border-radius: 4px;
            }

            .form-group textarea {
                min-height: 60px;
                resize: vertical;
            }

            .lang-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 15px;
            }

            .loading {
                text-align: center;
                padding: 40px;
                color: #999;
            }

            .message {
                padding: 10px 15px;
                border-radius: 4px;
                margin-bottom: 15px;
            }

            .message.success {
                background: #f6ffed;
                border: 1px solid #b7eb8f;
                color: #52c41a;
            }

            .message.error {
                background: #fff2f0;
                border: 1px solid #ffccc7;
                color: #ff4d4f;
            }

            .pagination {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 20px;
                background: white;
                border-top: 1px solid #f0f0f0;
            }

            .pagination-info {
                color: #666;
                font-size: 14px;
            }

            .pagination-controls {
                display: flex;
                gap: 10px;
                align-items: center;
            }

            .pagination-controls button {
                padding: 6px 12px;
                font-size: 12px;
            }

            .pagination-controls button:disabled {
                background: #f5f5f5;
                color: #999;
                cursor: not-allowed;
            }

            .page-size-selector {
                display: flex;
                align-items: center;
                gap: 10px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>ğŸŒ ç¿»è¯‘æ–‡ä»¶ç®¡ç†å™¨</h1>
                <p>ç®¡ç†å¤šè¯­è¨€ç¿»è¯‘æ–‡ä»¶ï¼Œæ”¯æŒå®æ—¶ç¼–è¾‘å’ŒåŒæ­¥</p>
                <div class="stats">
                    <div class="stat-item">
                        <strong id="totalTranslations">0</strong> ç¿»è¯‘æ¡ç›®
                    </div>
                    <div class="stat-item">
                        <strong id="totalLanguages">0</strong> æ”¯æŒè¯­è¨€
                    </div>
                    <div class="stat-item">
                        <strong id="totalFiles">0</strong> ç¿»è¯‘æ–‡ä»¶
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="æœç´¢ç¿»è¯‘ key æˆ–å†…å®¹..."
                    />
                    <select id="fileFilter">
                        <option value="">æ‰€æœ‰æ–‡ä»¶</option>
                    </select>
                    <select id="languageFilter">
                        <option value="">æ‰€æœ‰è¯­è¨€</option>
                    </select>
                    <button onclick="searchTranslations()">ğŸ” æœç´¢</button>
                    <button onclick="clearFilters()" class="secondary">
                        æ¸…é™¤ç­›é€‰
                    </button>
                    <div class="page-size-selector">
                        <span>æ¯é¡µæ˜¾ç¤º:</span>
                        <select id="pageSizeSelect" onchange="changePageSize()">
                            <option value="20">20</option>
                            <option value="50" selected>50</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                        </select>
                    </div>
                </div>
                <div class="control-group">
                    <button onclick="addTranslation()" class="secondary">
                        â• æ·»åŠ ç¿»è¯‘
                    </button>
                    <button onclick="showAddFileModal()" class="secondary"
                        style="background: #ff9800; border-color: #ff9800;">
                        ğŸ“„ æ–°å¢æ–‡ä»¶
                    </button>
                    <button onclick="batchTranslate()" class="secondary">
                        ğŸ¤– æ‰¹é‡ç¿»è¯‘
                    </button>
                    <button onclick="refreshData()">â™»ï¸ åˆ·æ–°æ•°æ®</button>
                    <button onclick="exportData()" class="secondary">
                        ğŸ“¥ å¯¼å‡ºæ•°æ®
                    </button>
                </div>
            </div>

            <div id="messageContainer"></div>

            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Key</th>
                            <th>æ–‡ä»¶</th>
                            <th>ä¸­æ–‡</th>
                            <th>è‹±æ–‡</th>
                            <th>
                                <select
                                    id="headerLanguageSelect"
                                    onchange="changeHeaderLanguage()"
                                    style="margin-left: 10px; font-size: 12px"
                                >
                                    <option value="">é€‰æ‹©è¯­è¨€...</option>
                                </select>
                            </th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="translationsTable">
                        <tr>
                            <td colspan="6" class="loading">åŠ è½½ä¸­...</td>
                        </tr>
                    </tbody>
                </table>
                <div class="pagination">
                    <div class="pagination-info">
                        <span id="paginationInfo"
                            >æ˜¾ç¤ºç¬¬ 1-50 æ¡ï¼Œå…± 0 æ¡è®°å½•</span
                        >
                    </div>
                    <div class="pagination-controls">
                        <button
                            id="firstPageBtn"
                            onclick="goToPage(1)"
                            disabled
                        >
                            é¦–é¡µ
                        </button>
                        <button
                            id="prevPageBtn"
                            onclick="goToPage(currentPage - 1)"
                            disabled
                        >
                            ä¸Šä¸€é¡µ
                        </button>
                        <span id="pageInfo"> 1 / 1 </span>
                        <button
                            id="nextPageBtn"
                            onclick="goToPage(currentPage + 1)"
                            disabled
                        >
                            ä¸‹ä¸€é¡µ
                        </button>
                        <button
                            id="lastPageBtn"
                            onclick="goToPage(totalPages)"
                            disabled
                        >
                            æœ«é¡µ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ¶ˆæ¯å¼¹çª— -->
        <div id="messageModal" class="modal" style="z-index: 10000">
            <div
                class="modal-content"
                style="max-width: 400px; margin: 20% auto"
            >
                <div class="modal-header">
                    <h3 id="messageTitle">æç¤º</h3>
                    <span class="close" onclick="closeMessageModal()"
                        >&times;</span
                    >
                </div>
                <div class="modal-body">
                    <div
                        id="messageIcon"
                        style="
                            text-align: center;
                            font-size: 48px;
                            margin-bottom: 15px;
                        "
                    ></div>
                    <p
                        id="messageText"
                        style="text-align: center; margin: 0; font-size: 16px"
                    ></p>
                </div>
                <div style="text-align: center; margin-top: 20px">
                    <button
                        onclick="closeMessageModal()"
                        class="secondary"
                        style="margin: 0 auto"
                    >
                        ç¡®å®š
                    </button>
                </div>
            </div>
        </div>

        <!-- æ–°å¢æ–‡ä»¶æ¨¡æ€æ¡† -->
        <div id="addFileModal" class="modal">
            <div class="modal-content" style="max-width: 500px">
                <div class="modal-header">
                    <h3>æ–°å¢ç¿»è¯‘æ–‡ä»¶</h3>
                    <span class="close" onclick="closeAddFileModal()">&times;</span>
                </div>
                <form id="addFileForm">
                    <div class="form-group">
                        <label for="newFileName">æ–‡ä»¶å:</label>
                        <input type="text" id="newFileName" required 
                            placeholder="ä¾‹å¦‚: new-feature" />
                        <small style="color: #999; font-size: 12px;">
                            å°†åœ¨æ‰€æœ‰è¯­è¨€æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºå¯¹åº”çš„ JSON æ–‡ä»¶
                        </small>
                    </div>
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button type="button" onclick="closeAddFileModal()">
                            å–æ¶ˆ
                        </button>
                        <button type="submit" class="secondary">
                            åˆ›å»ºæ–‡ä»¶
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ç¼–è¾‘ç¿»è¯‘æ¨¡æ€æ¡† -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">ç¼–è¾‘ç¿»è¯‘</h3>
                    <span class="close" onclick="closeModal()">&times;</span>
                </div>
                <form id="editForm">
                    <div class="form-group">
                        <label for="editKey">Key:</label>
                        <input type="text" id="editKey" required />
                    </div>
                    <div class="form-group">
                        <label for="editFile">æ–‡ä»¶:</label>
                        <select id="editFile" required></select>
                    </div>
                    <div>
                        <button
                            type="button"
                            onclick="autoTranslateInModal()"
                            class="secondary"
                            style="background: #28a745; border-color: #28a745"
                            title="ä¸€é”®ç¿»è¯‘"
                        >
                            ğŸ¤– ä¸€é”®ç¿»è¯‘
                        </button>
                    </div>
                    <div class="lang-grid" id="languageInputs">
                        <!-- åŠ¨æ€ç”Ÿæˆè¯­è¨€è¾“å…¥æ¡† -->
                    </div>
                    <div
                        style="
                            margin-top: 20px;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        "
                    >
                        <div>
                            <button type="button" onclick="closeModal()">
                                å–æ¶ˆ
                            </button>
                            <button
                                type="submit"
                                class="secondary"
                                style="margin-left: 10px"
                            >
                                ä¿å­˜
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <script>
            const API_BASE = "/api";
            let allTranslations = [];
            let filteredTranslations = [];
            let languages = [];
            let files = [];
            let currentEditId = null;
            let selectedHeaderLanguage = ""; // è¡¨å¤´é€‰ä¸­çš„è¯­è¨€

            // æ€§èƒ½ä¼˜åŒ–ï¼šæœç´¢ç»“æœç¼“å­˜
            const searchCache = new Map();
            const MAX_CACHE_SIZE = 50;

            // åˆ†é¡µç›¸å…³å˜é‡
            let currentPage = 1;
            let pageSize = 50;
            let totalPages = 1;

            // åˆå§‹åŒ–
            document.addEventListener("DOMContentLoaded", function () {
                loadInitialData();

                // æœç´¢æ¡†å®æ—¶æœç´¢äº‹ä»¶ï¼ˆä½¿ç”¨é˜²æŠ–ï¼‰
                document
                    .getElementById("searchInput")
                    .addEventListener("input", debouncedFilter);

                // æœç´¢æ¡†å›è½¦äº‹ä»¶ï¼ˆç«‹å³æœç´¢ï¼‰
                document
                    .getElementById("searchInput")
                    .addEventListener("keypress", function (e) {
                        if (e.key === "Enter") {
                            filterTranslations();
                        }
                    });

                // è¿‡æ»¤å™¨å˜åŒ–äº‹ä»¶
                document
                    .getElementById("fileFilter")
                    .addEventListener("change", filterTranslations);

                document
                    .getElementById("languageFilter")
                    .addEventListener("change", filterTranslations);

                // è¡¨å•æäº¤äº‹ä»¶
                document
                    .getElementById("editForm")
                    .addEventListener("submit", function (e) {
                        e.preventDefault();
                        saveTranslation();
                    });
            });

            // åŠ è½½ç¿»è¯‘æ•°æ®
            async function loadTranslations() {
                try {
                    // å…ˆåˆ·æ–°æœåŠ¡å™¨ç«¯ç¼“å­˜
                    const refreshRes = await fetch(
                        `${API_BASE}/refresh-cache`,
                        {
                            method: "POST",
                        }
                    );

                    if (!refreshRes.ok) {
                        throw new Error("åˆ·æ–°ç¼“å­˜å¤±è´¥");
                    }

                    // æ¸…é™¤å‰ç«¯æœç´¢ç¼“å­˜
                    searchCache.clear();

                    // ç„¶åè·å–æœ€æ–°çš„ç¿»è¯‘æ•°æ®
                    const translationsRes = await fetch(
                        `${API_BASE}/translations`
                    );
                    allTranslations = await translationsRes.json();
                    filterTranslations();
                } catch (error) {
                    showMessage("åŠ è½½ç¿»è¯‘æ•°æ®å¤±è´¥: " + error.message, "error");
                }
            }

            // åŠ è½½åˆå§‹æ•°æ®
            async function loadInitialData() {
                try {
                    const [translationsRes, languagesRes, filesRes] =
                        await Promise.all([
                            fetch(`${API_BASE}/translations`),
                            fetch(`${API_BASE}/languages`),
                            fetch(`${API_BASE}/files`),
                        ]);

                    allTranslations = await translationsRes.json();
                    languages = await languagesRes.json();
                    files = await filesRes.json();

                    updateStats();
                    populateFilters();
                    filteredTranslations = allTranslations;
                    updatePagination();
                    renderCurrentPage();
                } catch (error) {
                    showMessage("åŠ è½½æ•°æ®å¤±è´¥: " + error.message, "error");
                }
            }

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            function updateStats() {
                document.getElementById("totalTranslations").textContent =
                    allTranslations.length;
                document.getElementById("totalLanguages").textContent =
                    languages.length;
                document.getElementById("totalFiles").textContent =
                    files.length;
            }

            // å¡«å……è¿‡æ»¤å™¨é€‰é¡¹
            function populateFilters() {
                const fileFilter = document.getElementById("fileFilter");
                const languageFilter =
                    document.getElementById("languageFilter");
                const editFileSelect = document.getElementById("editFile");
                const headerLanguageSelect = document.getElementById(
                    "headerLanguageSelect"
                );

                // æ¸…ç©ºç°æœ‰é€‰é¡¹
                fileFilter.innerHTML = '<option value="">æ‰€æœ‰æ–‡ä»¶</option>';
                languageFilter.innerHTML = '<option value="">æ‰€æœ‰è¯­è¨€</option>';
                editFileSelect.innerHTML = "";
                headerLanguageSelect.innerHTML =
                    '<option value="">é€‰æ‹©è¯­è¨€...</option>';

                // æ·»åŠ æ–‡ä»¶é€‰é¡¹
                files.forEach((file) => {
                    fileFilter.innerHTML += `<option value="${file}">${file}</option>`;
                    editFileSelect.innerHTML += `<option value="${file}">${file}</option>`;
                });

                // æ·»åŠ è¯­è¨€é€‰é¡¹
                languages.forEach((lang) => {
                    const langName = getLanguageName(lang);
                    languageFilter.innerHTML += `<option value="${lang}">${langName}</option>`;

                    // ä¸ºè¡¨å¤´è¯­è¨€é€‰æ‹©å™¨æ·»åŠ é™¤ä¸­æ–‡å’Œè‹±æ–‡å¤–çš„å…¶ä»–è¯­è¨€
                    if (lang !== "zh" && lang !== "en") {
                        headerLanguageSelect.innerHTML += `<option value="${lang}">${langName}</option>`;
                    }
                });
            }

            // è·å–è¯­è¨€æ˜¾ç¤ºåç§°
            function getLanguageName(code) {
                const names = {
                    zh: "ä¸­æ–‡",
                    en: "English",
                    "zh-TW": "ç¹ä½“ä¸­æ–‡",
                    de: "Deutsch",
                    es: "EspaÃ±ol",
                    fr: "FranÃ§ais",
                    id: "Bahasa Indonesia",
                    ja: "æ—¥æœ¬èª",
                    ko: "í•œêµ­ì–´",
                    ms: "Bahasa Melayu",
                    pt: "PortuguÃªs",
                    ru: "Ğ ÑƒÑÑĞºĞ¸Ğ¹",
                    th: "à¹„à¸—à¸¢",
                    vi: "Tiáº¿ng Viá»‡t",
                };
                return names[code] || code;
            }

            // åˆ†é¡µç›¸å…³å‡½æ•°
            function updatePagination() {
                totalPages = Math.ceil(filteredTranslations.length / pageSize);
                if (currentPage > totalPages) {
                    currentPage = Math.max(1, totalPages);
                }

                // æ›´æ–°åˆ†é¡µä¿¡æ¯
                const start = (currentPage - 1) * pageSize + 1;
                const end = Math.min(
                    currentPage * pageSize,
                    filteredTranslations.length
                );
                document.getElementById("paginationInfo").textContent =
                    `æ˜¾ç¤ºç¬¬ ${start}-${end} æ¡ï¼Œå…± ${filteredTranslations.length} æ¡è®°å½•`;
                document.getElementById("pageInfo").textContent =
                    ` ${currentPage} / ${totalPages}`;

                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                document.getElementById("firstPageBtn").disabled =
                    currentPage === 1;
                document.getElementById("prevPageBtn").disabled =
                    currentPage === 1;
                document.getElementById("nextPageBtn").disabled =
                    currentPage === totalPages;
                document.getElementById("lastPageBtn").disabled =
                    currentPage === totalPages;
            }

            function goToPage(page) {
                if (page >= 1 && page <= totalPages) {
                    currentPage = page;
                    updatePagination();
                    renderCurrentPage();
                }
            }

            function changePageSize() {
                pageSize = parseInt(
                    document.getElementById("pageSizeSelect").value
                );
                currentPage = 1;
                updatePagination();
                renderCurrentPage();
            }

            function renderCurrentPage() {
                const start = (currentPage - 1) * pageSize;
                const end = start + pageSize;
                const pageData = filteredTranslations.slice(start, end);
                renderTranslations(pageData);
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            function showLoadingState() {
                const tbody = document.getElementById("translationsTable");
                tbody.innerHTML =
                    '<tr><td colspan="6" class="loading">æ­£åœ¨åŠ è½½...</td></tr>';
            }

            // æ¸²æŸ“ç¿»è¯‘è¡¨æ ¼
            function renderTranslations(translations) {
                const tbody = document.getElementById("translationsTable");

                if (translations.length === 0) {
                    tbody.innerHTML =
                        '<tr><td colspan="6" class="loading">æ²¡æœ‰æ‰¾åˆ°ç¿»è¯‘æ•°æ®</td></tr>';
                    return;
                }

                tbody.innerHTML = translations
                    .map((item) => {
                        // è·å–è¡¨å¤´é€‰ä¸­è¯­è¨€çš„ç¿»è¯‘å†…å®¹
                        let otherLangContent = "-";
                        if (
                            selectedHeaderLanguage &&
                            item.translations[selectedHeaderLanguage]
                        ) {
                            otherLangContent =
                                item.translations[selectedHeaderLanguage];
                        } else if (selectedHeaderLanguage) {
                            otherLangContent = "(æœªç¿»è¯‘)";
                        }

                        return `
                <tr>
                    <td><code class="key-cell">${item.key}</code></td>
                    <td><span class="file-badge">${item.file}</span></td>
                    <td class="translation-cell" title="${item.translations.zh || ""}">${item.translations.zh || "-"}</td>
                    <td class="translation-cell" title="${item.translations.en || ""}">${item.translations.en || "-"}</td>
                    <td class="translation-cell" title="${otherLangContent}">${otherLangContent}</td>
                    <td>
                        <div class="actions">
                            <button class="btn-small" onclick="editTranslation(${item.id})">ç¼–è¾‘</button>
                            <button class="btn-small danger" onclick="deleteTranslation(${item.id})">åˆ é™¤</button>
                        </div>
                    </td>
                </tr>
            `;
                    })
                    .join("");
            }

            // è¡¨å¤´è¯­è¨€é€‰æ‹©å˜åŒ–å¤„ç†
            function changeHeaderLanguage() {
                selectedHeaderLanguage = document.getElementById(
                    "headerLanguageSelect"
                ).value;
                // æ¸…ç†ç¼“å­˜ï¼Œå› ä¸ºæ˜¾ç¤ºå†…å®¹å‘ç”Ÿäº†å˜åŒ–
                searchCache.clear();
                // é‡æ–°æ¸²æŸ“å½“å‰é¡µé¢
                renderCurrentPage();
            }

            // é˜²æŠ–å‡½æ•°ï¼Œä¼˜åŒ–æœç´¢æ€§èƒ½
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            // ç”Ÿæˆç¼“å­˜é”®
            function generateCacheKey(
                searchTerm,
                selectedFile,
                selectedLanguage
            ) {
                return `${searchTerm}|${selectedFile}|${selectedLanguage}`;
            }

            // æ¸…ç†ç¼“å­˜ï¼ˆLRUç­–ç•¥ï¼‰
            function cleanCache() {
                if (searchCache.size >= MAX_CACHE_SIZE) {
                    const firstKey = searchCache.keys().next().value;
                    searchCache.delete(firstKey);
                }
            }

            // æœç´¢å’Œè¿‡æ»¤
            function filterTranslations() {
                const searchTerm = document
                    .getElementById("searchInput")
                    .value.toLowerCase();
                const selectedFile =
                    document.getElementById("fileFilter").value;
                const selectedLanguage =
                    document.getElementById("languageFilter").value;

                // ç”Ÿæˆç¼“å­˜é”®
                const cacheKey = generateCacheKey(
                    searchTerm,
                    selectedFile,
                    selectedLanguage
                );

                // æ£€æŸ¥ç¼“å­˜
                if (searchCache.has(cacheKey)) {
                    filteredTranslations = searchCache.get(cacheKey);
                    currentPage = 1;
                    updatePagination();
                    renderCurrentPage();
                    document.getElementById("translationCount").textContent =
                        `å…±æ‰¾åˆ° ${filteredTranslations.length} æ¡ç¿»è¯‘`;
                    return;
                }

                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆå¯¹äºå¤§æ•°æ®é›†ï¼‰
                if (allTranslations.length > 1000) {
                    showLoadingState();
                }

                // ä½¿ç”¨ requestAnimationFrame æ¥é¿å…é˜»å¡ UI
                requestAnimationFrame(() => {
                    // å¦‚æœæ²¡æœ‰ä»»ä½•è¿‡æ»¤æ¡ä»¶ï¼Œç›´æ¥æ˜¾ç¤ºæ‰€æœ‰æ•°æ®
                    if (!searchTerm && !selectedFile && !selectedLanguage) {
                        filteredTranslations = allTranslations;
                    } else {
                        // ä½¿ç”¨æ›´é«˜æ•ˆçš„è¿‡æ»¤é€»è¾‘
                        filteredTranslations = allTranslations.filter(
                            (item) => {
                                // æ–‡ä»¶è¿‡æ»¤ï¼ˆæœ€å¿«çš„è¿‡æ»¤æ¡ä»¶ï¼Œä¼˜å…ˆæ£€æŸ¥ï¼‰
                                if (
                                    selectedFile &&
                                    item.file !== selectedFile
                                ) {
                                    return false;
                                }

                                // è¯­è¨€è¿‡æ»¤
                                if (selectedLanguage) {
                                    const langTranslation =
                                        item.translations[selectedLanguage];
                                    if (
                                        !langTranslation ||
                                        langTranslation.trim() === ""
                                    ) {
                                        return false;
                                    }
                                }

                                // æœç´¢è¿‡æ»¤ï¼ˆæœ€è€—æ—¶çš„æ“ä½œï¼Œæ”¾åœ¨æœ€åï¼‰
                                if (searchTerm) {
                                    // é¦–å…ˆæ£€æŸ¥keyï¼ˆé€šå¸¸æ›´å¿«ï¼‰
                                    if (
                                        item.key
                                            .toLowerCase()
                                            .includes(searchTerm)
                                    ) {
                                        return true;
                                    }

                                    // ç„¶åæ£€æŸ¥ç¿»è¯‘å†…å®¹
                                    for (const translation of Object.values(
                                        item.translations
                                    )) {
                                        if (
                                            translation &&
                                            translation
                                                .toLowerCase()
                                                .includes(searchTerm)
                                        ) {
                                            return true;
                                        }
                                    }
                                    return false;
                                }

                                return true;
                            }
                        );
                    }

                    // ç¼“å­˜ç»“æœ
                    cleanCache();
                    searchCache.set(cacheKey, [...filteredTranslations]);

                    // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
                    currentPage = 1;
                    updatePagination();
                    renderCurrentPage();

                    document.getElementById("translationCount").textContent =
                        `å…±æ‰¾åˆ° ${filteredTranslations.length} æ¡ç¿»è¯‘`;
                });
            }

            // åˆ›å»ºé˜²æŠ–ç‰ˆæœ¬çš„è¿‡æ»¤å‡½æ•°
            const debouncedFilter = debounce(filterTranslations, 300);

            // æ¸…é™¤ç­›é€‰
            function clearFilters() {
                document.getElementById("searchInput").value = "";
                document.getElementById("fileFilter").value = "";
                document.getElementById("languageFilter").value = "";
                filteredTranslations = allTranslations;
                currentPage = 1;
                updatePagination();
                renderCurrentPage();
                document.getElementById("translationCount").textContent =
                    `å…±æ‰¾åˆ° ${filteredTranslations.length} æ¡ç¿»è¯‘`;
            }

            // æ·»åŠ ç¿»è¯‘
            function addTranslation() {
                currentEditId = null;
                document.getElementById("modalTitle").textContent = "æ·»åŠ ç¿»è¯‘";
                document.getElementById("editKey").value = "";
                document.getElementById("editFile").value = files[0] || "";

                generateLanguageInputs();
                document.getElementById("editModal").style.display = "block";
            }

            // ç¼–è¾‘ç¿»è¯‘
            function editTranslation(id) {
                const translation = allTranslations.find((t) => t.id === id);
                if (!translation) return;

                currentEditId = id;
                document.getElementById("modalTitle").textContent = "ç¼–è¾‘ç¿»è¯‘";
                document.getElementById("editKey").value = translation.key;
                document.getElementById("editFile").value = translation.file;

                generateLanguageInputs(translation.translations);
                document.getElementById("editModal").style.display = "block";
            }

            // ç”Ÿæˆè¯­è¨€è¾“å…¥æ¡†
            function generateLanguageInputs(translations = {}) {
                const container = document.getElementById("languageInputs");
                container.innerHTML = languages
                    .map(
                        (lang) => `
                <div class="form-group">
                    <label for="lang-${lang}">${getLanguageName(lang)}:</label>
                    <textarea id="lang-${lang}" data-lang="${lang}" placeholder="è¾“å…¥${getLanguageName(lang)}ç¿»è¯‘...">${translations[lang] || ""}</textarea>
                </div>
            `
                    )
                    .join("");
            }

            // ä¿å­˜ç¿»è¯‘
            async function saveTranslation() {
                const key = document.getElementById("editKey").value;
                const file = document.getElementById("editFile").value;

                const translations = {};
                languages.forEach((lang) => {
                    const input = document.getElementById(`lang-${lang}`);
                    if (input) {
                        translations[lang] = input.value;
                    }
                });

                const data = {
                    key,
                    file,
                    translations,
                    updatedAt: new Date().toISOString(),
                };

                try {
                    let response;
                    if (currentEditId) {
                        // æ›´æ–°ç°æœ‰ç¿»è¯‘
                        response = await fetch(
                            `${API_BASE}/translations/${currentEditId}`,
                            {
                                method: "PUT",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify({
                                    ...data,
                                    id: currentEditId,
                                }),
                            }
                        );
                    } else {
                        // æ·»åŠ æ–°ç¿»è¯‘
                        response = await fetch(`${API_BASE}/translations`, {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                ...data,
                                id: Date.now(),
                                createdAt: new Date().toISOString(),
                            }),
                        });
                    }

                    if (response.ok) {
                        showMessage("ç¿»è¯‘ä¿å­˜æˆåŠŸ", "success");
                        closeModal();
                        refreshData();
                    } else {
                        throw new Error("ä¿å­˜å¤±è´¥");
                    }
                } catch (error) {
                    showMessage("ä¿å­˜ç¿»è¯‘å¤±è´¥: " + error.message, "error");
                }
            }

            // åˆ é™¤ç¿»è¯‘
            async function deleteTranslation(id) {
                if (!confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç¿»è¯‘å—ï¼Ÿ")) return;

                try {
                    const response = await fetch(
                        `${API_BASE}/translations/${id}`,
                        {
                            method: "DELETE",
                        }
                    );

                    if (response.ok) {
                        showMessage("ç¿»è¯‘åˆ é™¤æˆåŠŸ", "success");
                        refreshData();
                    } else {
                        throw new Error("åˆ é™¤å¤±è´¥");
                    }
                } catch (error) {
                    showMessage("åˆ é™¤ç¿»è¯‘å¤±è´¥: " + error.message, "error");
                }
            }

            // åˆ·æ–°æ•°æ®
            async function refreshData() {
                showMessage("æ­£åœ¨åˆ·æ–°æ•°æ®...", "info");
                await loadTranslations();
                showMessage("æ•°æ®åˆ·æ–°å®Œæˆ", "success");
            }

            // å¯¼å‡ºæ•°æ®
            async function exportData() {
                try {
                    showMessage("æ­£åœ¨å‡†å¤‡å¯¼å‡ºæ•°æ®...", "info");

                    // åˆ›å»ºä¸€ä¸ªéšè—çš„é“¾æ¥æ¥è§¦å‘ä¸‹è½½
                    const link = document.createElement("a");
                    link.href = `${API_BASE}/export-data`;
                    link.style.display = "none";

                    // æ·»åŠ åˆ°é¡µé¢å¹¶ç‚¹å‡»
                    document.body.appendChild(link);
                    link.click();

                    // æ¸…ç†
                    document.body.removeChild(link);

                    showMessage("å¯¼å‡ºè¯·æ±‚å·²å‘é€ï¼Œæ–‡ä»¶å°†è‡ªåŠ¨ä¸‹è½½", "success");
                } catch (error) {
                    showMessage("å¯¼å‡ºæ•°æ®å¤±è´¥: " + error.message, "error");
                }
            }

            // å¼¹çª—å†…ä¸€é”®ç¿»è¯‘
            async function autoTranslateInModal() {
                // è·å–å½“å‰è¡¨å•ä¸­çš„ç¿»è¯‘å†…å®¹
                const currentTranslations = {};
                const languageInputs = document.querySelectorAll(
                    "#languageInputs textarea"
                );

                languageInputs.forEach((input) => {
                    const lang = input.getAttribute("data-lang");
                    const value = input.value.trim();
                    if (value) {
                        currentTranslations[lang] = value;
                    }
                });

                // æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„æºè¯­è¨€
                const availableLanguages = Object.keys(currentTranslations);
                if (availableLanguages.length === 0) {
                    showMessage(
                        "è¯·å…ˆè¾“å…¥è‡³å°‘ä¸€ç§è¯­è¨€çš„ç¿»è¯‘å†…å®¹ä½œä¸ºæºæ–‡æœ¬",
                        "error"
                    );
                    return;
                }

                // è®©ç”¨æˆ·é€‰æ‹©æºè¯­è¨€
                const sourceLanguage =
                    availableLanguages.length === 1
                        ? availableLanguages[0]
                        : prompt(
                              `è¯·é€‰æ‹©æºè¯­è¨€ (${availableLanguages.join(", ")})ï¼š`,
                              availableLanguages.includes("zh")
                                  ? "en"
                                  : availableLanguages[0]
                          );

                if (!sourceLanguage) return;

                if (!currentTranslations[sourceLanguage]) {
                    showMessage(
                        `æºè¯­è¨€ ${sourceLanguage} çš„ç¿»è¯‘å†…å®¹ä¸ºç©º`,
                        "error"
                    );
                    return;
                }

                const confirmMsg = `ç¡®å®šè¦ä½¿ç”¨ "${currentTranslations[sourceLanguage]}" ä½œä¸ºæºæ–‡æœ¬ï¼Œè‡ªåŠ¨ç¿»è¯‘åˆ°å…¶ä»–è¯­è¨€å—ï¼Ÿ`;
                if (!confirm(confirmMsg)) return;

                try {
                    showMessage("æ­£åœ¨è‡ªåŠ¨ç¿»è¯‘ï¼Œè¯·ç¨å€™...", "info");

                    // ä½¿ç”¨çº¯ç¿»è¯‘APIï¼Œä¸ä¿å­˜æ–‡ä»¶
                    const targetLanguages = languages.filter(
                        (lang) => lang !== sourceLanguage
                    );

                    const response = await fetch(`${API_BASE}/translate-only`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            text: currentTranslations[sourceLanguage],
                            sourceLanguage: sourceLanguage,
                            targetLanguages: targetLanguages,
                        }),
                    });

                    const result = await response.json();

                    if (result.success) {
                        // æ›´æ–°è¡¨å•ä¸­çš„ç¿»è¯‘å†…å®¹
                        Object.entries(result.results).forEach(
                            ([lang, translation]) => {
                                const input = document.querySelector(
                                    `textarea[data-lang="${lang}"]`
                                );
                                if (input && translation) {
                                    input.value = translation;
                                }
                            }
                        );

                        showMessage(
                            `è‡ªåŠ¨ç¿»è¯‘å®Œæˆï¼ç¿»è¯‘äº† ${Object.keys(result.results).length} ç§è¯­è¨€ã€‚ç‚¹å‡»ä¿å­˜æŒ‰é’®æ¥ä¿å­˜æ›´æ”¹ã€‚`,
                            "success"
                        );

                        if (result.errors && result.errors.length > 0) {
                            showMessage(
                                `éƒ¨åˆ†ç¿»è¯‘å¤±è´¥: ${result.errors.join(", ")}`,
                                "warning"
                            );
                        }
                    } else {
                        throw new Error(result.error || "è‡ªåŠ¨ç¿»è¯‘å¤±è´¥");
                    }
                } catch (error) {
                    showMessage("è‡ªåŠ¨ç¿»è¯‘å¤±è´¥: " + error.message, "error");
                }
            }

            // ä¸€é”®ç¿»è¯‘ï¼ˆè¡¨æ ¼ä¸­çš„æŒ‰é’®ï¼‰
            async function autoTranslate(id) {
                const translation = allTranslations.find((t) => t.id === id);
                if (!translation) return;

                const sourceLanguage = prompt(
                    "è¯·é€‰æ‹©æºè¯­è¨€ (zh, en, zh-TW ç­‰):",
                    "zh"
                );
                if (!sourceLanguage) return;

                if (!translation.translations[sourceLanguage]) {
                    showMessage(
                        `æºè¯­è¨€ ${sourceLanguage} çš„ç¿»è¯‘ä¸å­˜åœ¨`,
                        "error"
                    );
                    return;
                }

                const confirmMsg = `ç¡®å®šè¦ä½¿ç”¨ "${translation.translations[sourceLanguage]}" ä½œä¸ºæºæ–‡æœ¬ï¼Œè‡ªåŠ¨ç¿»è¯‘åˆ°å…¶ä»–è¯­è¨€å—ï¼Ÿ`;
                if (!confirm(confirmMsg)) return;

                try {
                    showMessage("æ­£åœ¨è‡ªåŠ¨ç¿»è¯‘ï¼Œè¯·ç¨å€™...", "success");

                    const response = await fetch(
                        `${API_BASE}/auto-translate/${id}`,
                        {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ sourceLanguage }),
                        }
                    );

                    const result = await response.json();

                    if (result.success) {
                        showMessage(
                            `è‡ªåŠ¨ç¿»è¯‘å®Œæˆï¼ç¿»è¯‘äº† ${Object.keys(result.results).length} ç§è¯­è¨€`,
                            "success"
                        );
                        if (result.errors && result.errors.length > 0) {
                            showMessage(
                                `éƒ¨åˆ†ç¿»è¯‘å¤±è´¥: ${result.errors.join(", ")}`,
                                "error"
                            );
                        }
                        refreshData();
                    } else {
                        throw new Error(result.error || "è‡ªåŠ¨ç¿»è¯‘å¤±è´¥");
                    }
                } catch (error) {
                    showMessage("è‡ªåŠ¨ç¿»è¯‘å¤±è´¥: " + error.message, "error");
                }
            }

            // æ‰¹é‡ç¿»è¯‘
            async function batchTranslate() {
                const sourceLanguage = prompt(
                    "è¯·é€‰æ‹©æºè¯­è¨€ (zh, en, zh-TW ç­‰):",
                    "zh"
                );
                if (!sourceLanguage) return;

                const targetLanguagesInput = prompt(
                    "è¯·è¾“å…¥ç›®æ ‡è¯­è¨€ï¼Œç”¨é€—å·åˆ†éš” (ç•™ç©ºåˆ™ç¿»è¯‘åˆ°æ‰€æœ‰å…¶ä»–è¯­è¨€):",
                    ""
                );
                const targetLanguages = targetLanguagesInput
                    ? targetLanguagesInput.split(",").map((lang) => lang.trim())
                    : null;

                // è·å–å½“å‰æ˜¾ç¤ºçš„ç¿»è¯‘IDåˆ—è¡¨
                const visibleTranslations = document.querySelectorAll(
                    "#translationsTable tr"
                );
                const ids = [];

                visibleTranslations.forEach((row) => {
                    const editBtn = row.querySelector(
                        'button[onclick*="editTranslation"]'
                    );
                    if (editBtn) {
                        const onclick = editBtn.getAttribute("onclick");
                        const id = onclick.match(
                            /editTranslation\((\d+)\)/
                        )?.[1];
                        if (id) ids.push(parseInt(id));
                    }
                });

                if (ids.length === 0) {
                    showMessage("æ²¡æœ‰æ‰¾åˆ°å¯ç¿»è¯‘çš„æ¡ç›®", "error");
                    return;
                }

                const confirmMsg = `ç¡®å®šè¦æ‰¹é‡ç¿»è¯‘ ${ids.length} ä¸ªæ¡ç›®å—ï¼Ÿè¿™å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ã€‚`;
                if (!confirm(confirmMsg)) return;

                try {
                    showMessage(
                        `æ­£åœ¨æ‰¹é‡ç¿»è¯‘ ${ids.length} ä¸ªæ¡ç›®ï¼Œè¯·è€å¿ƒç­‰å¾…...`,
                        "success"
                    );

                    const response = await fetch(
                        `${API_BASE}/batch-translate`,
                        {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({
                                ids,
                                sourceLanguage,
                                targetLanguages,
                            }),
                        }
                    );

                    const result = await response.json();

                    if (result.success) {
                        showMessage(
                            `æ‰¹é‡ç¿»è¯‘å®Œæˆï¼å¤„ç†äº† ${result.results.length} ä¸ªæ¡ç›®`,
                            "success"
                        );
                        if (result.errors && result.errors.length > 0) {
                            showMessage(
                                `éƒ¨åˆ†ç¿»è¯‘å¤±è´¥: ${result.errors.slice(0, 5).join(", ")}${result.errors.length > 5 ? "..." : ""}`,
                                "error"
                            );
                        }
                        refreshData();
                    } else {
                        throw new Error(result.error || "æ‰¹é‡ç¿»è¯‘å¤±è´¥");
                    }
                } catch (error) {
                    showMessage("æ‰¹é‡ç¿»è¯‘å¤±è´¥: " + error.message, "error");
                }
            }

            // å…³é—­æ¨¡æ€æ¡†
            function closeModal() {
                document.getElementById("editModal").style.display = "none";
            }

            // æ˜¾ç¤ºæ¶ˆæ¯å¼¹çª—
            function showMessage(message, type = "success") {
                const modal = document.getElementById("messageModal");
                const title = document.getElementById("messageTitle");
                const icon = document.getElementById("messageIcon");
                const text = document.getElementById("messageText");
                const closeBtn = modal.querySelector(".close");
                const confirmBtn = modal.querySelector("button");

                // è®¾ç½®å›¾æ ‡å’Œæ ‡é¢˜
                switch (type) {
                    case "success":
                        title.textContent = "æˆåŠŸ";
                        icon.textContent = "âœ…";
                        icon.style.color = "#28a745";
                        break;
                    case "error":
                        title.textContent = "é”™è¯¯";
                        icon.textContent = "âŒ";
                        icon.style.color = "#dc3545";
                        break;
                    case "warning":
                        title.textContent = "è­¦å‘Š";
                        icon.textContent = "âš ï¸";
                        icon.style.color = "#ffc107";
                        break;
                    case "info":
                        title.textContent = "ä¿¡æ¯";
                        icon.textContent = "â„¹ï¸";
                        icon.style.color = "#17a2b8";
                        break;
                    default:
                        title.textContent = "æç¤º";
                        icon.textContent = "ğŸ’¬";
                        icon.style.color = "#6c757d";
                }

                text.textContent = message;

                // å¯¹äºæ­£åœ¨è¿›è¡Œçš„æ“ä½œï¼ˆinfoç±»å‹ï¼‰ï¼Œéšè—å…³é—­æŒ‰é’®
                if (type === "info") {
                    closeBtn.style.display = "none";
                    confirmBtn.style.display = "none";
                } else {
                    closeBtn.style.display = "block";
                    confirmBtn.style.display = "block";
                }

                modal.style.display = "block";

                // 3ç§’åè‡ªåŠ¨å…³é—­ï¼ˆé™¤äº†é”™è¯¯æ¶ˆæ¯å’Œinfoæ¶ˆæ¯ï¼‰
                if (type !== "error" && type !== "info") {
                    // setTimeout(() => {
                    //     closeMessageModal();
                    // }, 3000);
                }
            }

            // å…³é—­æ¶ˆæ¯å¼¹çª—
            function closeMessageModal() {
                document.getElementById("messageModal").style.display = "none";
            }

            // æ˜¾ç¤ºæ–°å¢æ–‡ä»¶æ¨¡æ€æ¡†
            function showAddFileModal() {
                document.getElementById("newFileName").value = "";
                document.getElementById("addFileModal").style.display = "block";
            }

            // å…³é—­æ–°å¢æ–‡ä»¶æ¨¡æ€æ¡†
            function closeAddFileModal() {
                document.getElementById("addFileModal").style.display = "none";
            }

            // æ–°å¢æ–‡ä»¶è¡¨å•æäº¤
            document.addEventListener("DOMContentLoaded", function () {
                document
                    .getElementById("addFileForm")
                    .addEventListener("submit", async function (e) {
                        e.preventDefault();
                        await createNewFile();
                    });
            });

            // åˆ›å»ºæ–°æ–‡ä»¶
            async function createNewFile() {
                const fileName = document.getElementById("newFileName").value.trim();

                if (!fileName) {
                    showMessage("è¯·è¾“å…¥æ–‡ä»¶å", "error");
                    return;
                }

                // éªŒè¯æ–‡ä»¶åæ ¼å¼ï¼ˆåªå…è®¸å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦å’Œä¸‹åˆ’çº¿ï¼‰
                if (!/^[a-zA-Z0-9_-]+$/.test(fileName)) {
                    showMessage(
                        "æ–‡ä»¶ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦å’Œä¸‹åˆ’çº¿",
                        "error"
                    );
                    return;
                }

                // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨
                if (files.includes(fileName)) {
                    showMessage("æ–‡ä»¶åå·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°", "error");
                    return;
                }

                try {
                    showMessage(`æ­£åœ¨åˆ›å»ºæ–‡ä»¶ ${fileName}.json...`, "info");

                    const response = await fetch(`${API_BASE}/create-file`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ fileName }),
                    });

                    const result = await response.json();

                    if (response.ok && result.success) {
                        showMessage(
                            `æˆåŠŸåœ¨ ${result.createdCount} ä¸ªè¯­è¨€æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº† ${fileName}.json`,
                            "success"
                        );
                        closeAddFileModal();
                        
                        // åˆ·æ–°æ•°æ®
                        await loadInitialData();
                    } else {
                        throw new Error(result.error || "åˆ›å»ºæ–‡ä»¶å¤±è´¥");
                    }
                } catch (error) {
                    showMessage("åˆ›å»ºæ–‡ä»¶å¤±è´¥: " + error.message, "error");
                }
            }

            
        </script>
    </body>
</html>
